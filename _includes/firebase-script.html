<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    // TODO: Find a way to securely pass in your apiKey.
    apiKey: "AIzaSyDm4snQhQXfvdVy9C-8ooJdeDnzeKJELlU",
    authDomain: "app-management-ea05a.firebaseapp.com",
    databaseURL: "https://app-management-ea05a.firebaseio.com",
    projectId: "app-management-ea05a",
    storageBucket: "app-management-ea05a.appspot.com",
    messagingSenderId: "616890422597",
    appId: "1:616890422597:web:3b3cf2a4e022901b7dda2c"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);

  // Create a reference to the Firebase Realtime Database
  const dbRef = firebase.database().ref();

  // Add an event listener to the comment form
  const commentForm = document.querySelector("#comment-form");
  commentForm.addEventListener("submit", event => {
    event.preventDefault();
    const commentInput = document.querySelector("#comment-input");
    const newCommentRef = dbRef.child("comments").push();
    newCommentRef.set({
      text: commentInput.value
    });
    commentInput.value = "";
  });

  // Add an event listener to retrieve comments from the Firebase Realtime Database
  dbRef.child("comments").on("value", snapshot => {
    const commentsContainer = document.querySelector("#comments-container");
    commentsContainer.innerHTML = "";
    snapshot.forEach(childSnapshot => {
      const comment = childSnapshot.val();
      const commentItem = document.createElement("li");
      commentItem.textContent = comment.text;
      commentsContainer.appendChild(commentItem);
    });
  });
</script>