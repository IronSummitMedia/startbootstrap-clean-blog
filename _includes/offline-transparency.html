<script>
    function isArticleCached(articleId) {
        // Check if the article is marked as cached in localStorage
        const cachedArticles = JSON.parse(localStorage.getItem('cachedArticles')) || {};
        return cachedArticles[articleId] === true;
    }

    // Add event listener to check offline status and update article transparency
    window.addEventListener('offline', updateArticleTransparency);
    window.addEventListener('online', updateArticleTransparency);

    // Function to update article transparency based on caching status
    function updateArticleTransparency() {
        var articleId = '{{ post.id }}';
        var articleContainers = document.querySelectorAll('.post-preview');

        articleContainers.forEach(function (articleContainer) {
            if (!isArticleCached(articleId) && navigator.onLine) {
                articleContainer.classList.add('offline');
            } else {
                articleContainer.classList.remove('offline');
            }
        });
    }

    // Initial check when the page loads
    window.addEventListener('DOMContentLoaded', updateArticleTransparency);
</script>