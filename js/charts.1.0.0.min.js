!function(l){function r(e){return _.map(e,function(e){return{benchmark:_.last(_.get(e,"benchmark").split(".")),size:_.parseInt(_.get(e,"params.size")),score:_.get(e,"primaryMetric.score")}})}function a(e){return _.filter(e,function(e){return!0})}function n(e){var t=_.chain(e).groupBy("size").map(function(e,t){return{size:t,maxScore:_.maxBy(e,"score").score}}).reduce(function(e,t,r){return e[t.size]=t.maxScore,e},{}).value();return _.map(e,function(e){return e.relativeScoreBySize=e.score/t[e.size]*100,e})}function c(e){var t=_.chain(e).groupBy("benchmark").map(function(e,t){return{benchmark:t,maxScore:_.maxBy(e,"score").score}}).reduce(function(e,t,r){return e[t.benchmark]=t.maxScore,e},{}).value();return _.map(e,function(e){return e.relativeScoreByBenchmark=e.score/t[e.benchmark]*100,e})}function s(e,t,r,a){new Taucharts.Chart({type:"bar",x:"size",y:"relativeScoreBySize",color:"benchmark",data:t,guide:{x:{label:{text:r}},y:{label:{text:"% score"}}},dimensions:{size:{type:"order"},relativeScoreBySize:{type:"measure",scale:a}},plugins:[Taucharts.api.plugins.get("legend")(),Taucharts.api.plugins.get("tooltip")({fields:["relativeScoreBySize","benchmark"]})]}).renderTo(document.getElementById(e))}function i(e,t){new Taucharts.Chart({type:"bar",x:"benchmark",y:"score",color:"benchmark",data:t,guide:{x:{label:{text:"Benchmark"}},y:{label:{text:"Ops/sec"}}},dimensions:{benchmark:{type:"order"},score:{type:"measure"}},plugins:[Taucharts.api.plugins.get("tooltip")({fields:["score","benchmark"]})]}).renderTo(document.getElementById(e))}function o(o,e,u){_.forEach(e,function(e,t){for(var r,a,n,c=l("<tr/>",{class:"selection"}),s=[(r=t,"<th>"+r+"</th>")],i=0;i<u;i++)s.push((n=e[i].score,a=numeral(n).format("0,000.00"),'<td class="text-right '+(100===e[i].relativeScoreBySize?"em":"")+'">'+a+"</td>"));c.append(s),c.appendTo("#"+o),c.click(function(){l(this).toggleClass("table-active")})})}function u(e,t){return _.flow(_.partialRight(_.take,t),_.partialRight(_.groupBy,"benchmark"))(e)}fetch("../data/benchmark-streams-sum-int.json").then(function(e){return e.text()}).then(function(e){var t=_.flow(JSON.parse,r,a,n)(e);s("streams-sum-int-chart",t,"Items in list"),o("streams-sum-int-table",_.groupBy(t,"benchmark"),4)}),fetch("../data/benchmark-streams-sum-double-calculation.json").then(function(e){return e.text()}).then(function(e){var t=_.flow(JSON.parse,r,a,n)(e);s("streams-sum-double-calculation-chart",t,"Items in list"),o("streams-sum-double-calculation-table",_.groupBy(t,"benchmark"),4)}),fetch("../data/benchmark-streams-group.json").then(function(e){return e.text()}).then(function(e){var t=_.flow(JSON.parse,r,a,n,c)(e);s("streams-group-chart",t,"Items in list"),o("streams-group-table",_.groupBy(t,"benchmark"),4)}),fetch("../data/benchmark-streams-filter-sort-distinct.json").then(function(e){return e.text()}).then(function(e){var t=_.flow(JSON.parse,r,a,n)(e);s("streams-filter-sort-distinct-chart",t,"Items in list"),o("streams-filter-sort-distinct-table",_.groupBy(t,"benchmark"),4)}),fetch("../data/benchmark-wfc.json").then(function(e){return e.text()}).then(function(e){var t=_.flow(JSON.parse,r,a)(e);i("wfc-chart",_.take(t,2)),o("wfc-table",u(t,2),1),i("wfc-chart1",_.take(t,3)),o("wfc-table1",u(t,3),1),i("wfc-chart2",_.take(t,4)),o("wfc-table2",u(t,4),1),i("wfc-chart3",_.take(t,5)),o("wfc-table3",u(t,5),1),i("wfc-chart4",_.take(t,6)),o("wfc-table4",u(t,6),1)})}(jQuery);